<!-- home.component.html -->
<h1 style="text-align: center;">Bienvenue dans le métro de Lille !</h1>
<button class="burger-menu" (click)="toggleMenu()">☰</button>

<app-popup-probleme *ngIf="showPopup" (closePopup)="showPopup = false"></app-popup-probleme>

<div class="map-container">
    <!-- Ligne 1 -->
    <div class="line line1">
        <div *ngFor="let station of appService.metroLine1; let i = index" [ngClass]="{
                 'station': true,
                 'station-medium-ink': getStationInkStatus(station) === 'medium',
                 'station-critical-ink': getStationInkStatus(station) === 'critical'
             }" (click)="onSelectStation(station)" [style.left]="getStationPosition(i, appService.metroLine1.length)"
            [attr.data-name]="station.name">
            <p *ngIf="station.agent">{{ station.agent.name }}</p>
        </div>
    </div>

    <!-- Ligne 2A -->
    <div class="line line2 line2A">
        <div *ngFor="let station of appService.metroLine2A; let i = index" [ngClass]="{
                 'station': true,
                 'station-medium-ink': getStationInkStatus(station) === 'medium',
                 'station-critical-ink': getStationInkStatus(station) === 'critical'
             }" (click)="onSelectStation(station)" [style.left]="getStationPosition(i, appService.metroLine2A.length)"
            [attr.data-name]="station.name">
            <p *ngIf="station.agent">{{ station.agent.name }}</p>
        </div>
    </div>

    <!-- Ligne 2B -->
    <div class="line line2 line2B">
        <div *ngFor="let station of appService.metroLine2B; let i = index" [ngClass]="{
                 'station': true,
                 'station-medium-ink': getStationInkStatus(station) === 'medium',
                 'station-critical-ink': getStationInkStatus(station) === 'critical'
             }" (click)="onSelectStation(station)" [style.left]="getStationPosition(i, appService.metroLine2B.length)"
            [attr.data-name]="station.name">
            <p *ngIf="station.agent">{{ station.agent.name }}</p>
        </div>
    </div>
</div>

<div class="menu-content" [class.menu-closed]="!showMenu" [style.display]="showMenu ? 'block' : 'none'">
    <button class="close-menu" (click)="toggleMenu()">X</button>
    <h2>Sélectionner un agent :</h2>
    <div *ngFor="let agent of agents; let i = index" class="agent">
        <img [src]="agent.photoUrl" alt="Photo de l'agent">
        <p>{{ agent.name }}</p>
        <button (click)="onSelectAgent(agent)">Voir la disponibilité</button>
    </div>
    <app-agents class= "assigner" [ngClass]="showAgents"
    [selectedAgent]="selectedAgent"></app-agents>
</div>